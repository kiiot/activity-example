<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="author" content="">
<meta name="created" content="">
<title> App</title>
<link rel="stylesheet" href="">
<script type="text/javascript" src=""></script>
<script>

    // ----------
    // parse query string
    // ----------
    
    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }
    
    // ----------
    // parse url
    // ----------
    
    var parser = document.createElement('a');
    
    //parser.href = "http://example.com:3000/pathname/?search=test#hash";
    parser.href = window.location.href 
    
    parser.protocol; // => "http:"
    parser.hostname; // => "example.com"
    parser.port;     // => "3000"
    parser.pathname; // => "/pathname/"
    parser.search;   // => "?search=test"
    parser.hash;     // => "#hash"
    parser.host;     // => "example.com:3000"

    
    var callbackUrl = getParameterByName('base_grant_url', parser.search);
    
    var rand = Math.floor((Math.random() * 3) + 1);
    switch(rand) {
        case 1:
            callbackUrl += '?user_continue_url=http://www.iiot.io/use-case-restaurant';
            break;
        case 2:
            callbackUrl += '?user_continue_url=http://www.iiot.io/use-case-mall';
            break;
        case 3:
            callbackUrl += '?user_continue_url=https://www.facebook.com/iiotio';
        default:
            callbackUrl += '?user_continue_url=https://www.facebook.com/iiotio';
    }
    
    window.location.href = callbackUrl;
</script>
<style type="text/css">

</style>
</head>
<body>
<h1>App</h1>
<!-- Redirect to Google Play or App Store refers to the client platform -->
</body>
</html>
